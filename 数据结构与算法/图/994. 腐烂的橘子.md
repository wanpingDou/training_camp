#### Leetcode [994. è…çƒ‚çš„æ©˜å­](https://leetcode-cn.com/problems/rotting-oranges/)

éš¾åº¦ï¼šç®€å•

> åœ¨ç»™å®šçš„ç½‘æ ¼ä¸­ï¼Œæ¯ä¸ªå•å…ƒæ ¼å¯ä»¥æœ‰ä»¥ä¸‹ä¸‰ä¸ªå€¼ä¹‹ä¸€ï¼š
>
> - å€¼ `0` ä»£è¡¨ç©ºå•å…ƒæ ¼ï¼›
> - å€¼ `1` ä»£è¡¨æ–°é²œæ©˜å­ï¼›
> - å€¼ `2` ä»£è¡¨è…çƒ‚çš„æ©˜å­ã€‚
>
> æ¯åˆ†é’Ÿï¼Œä»»ä½•ä¸è…çƒ‚çš„æ©˜å­ï¼ˆåœ¨ 4 ä¸ªæ­£æ–¹å‘ä¸Šï¼‰ç›¸é‚»çš„æ–°é²œæ©˜å­éƒ½ä¼šè…çƒ‚ã€‚
>
> è¿”å›ç›´åˆ°å•å…ƒæ ¼ä¸­æ²¡æœ‰æ–°é²œæ©˜å­ä¸ºæ­¢æ‰€å¿…é¡»ç»è¿‡çš„æœ€å°åˆ†é’Ÿæ•°ã€‚å¦‚æœä¸å¯èƒ½ï¼Œè¿”å› `-1`ã€‚
>
>  
>
> **ç¤ºä¾‹ 1ï¼š**
>
> **![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/02/16/oranges.png)**
>
> ```
> è¾“å…¥ï¼š[[2,1,1],[1,1,0],[0,1,1]]
> è¾“å‡ºï¼š4
>
> ```
>
> **ç¤ºä¾‹ 2ï¼š**
>
> ```
> è¾“å…¥ï¼š[[2,1,1],[0,1,1],[1,0,1]]
> è¾“å‡ºï¼š-1
> è§£é‡Šï¼šå·¦ä¸‹è§’çš„æ©˜å­ï¼ˆç¬¬ 2 è¡Œï¼Œ ç¬¬ 0 åˆ—ï¼‰æ°¸è¿œä¸ä¼šè…çƒ‚ï¼Œå› ä¸ºè…çƒ‚åªä¼šå‘ç”Ÿåœ¨ 4 ä¸ªæ­£å‘ä¸Šã€‚
>
> ```
>
> **ç¤ºä¾‹ 3ï¼š**
>
> ```
> è¾“å…¥ï¼š[[0,2]]
> è¾“å‡ºï¼š0
> è§£é‡Šï¼šå› ä¸º 0 åˆ†é’Ÿæ—¶å·²ç»æ²¡æœ‰æ–°é²œæ©˜å­äº†ï¼Œæ‰€ä»¥ç­”æ¡ˆå°±æ˜¯ 0 ã€‚
>
> ```
>
>  
>
> **æç¤ºï¼š**
>
> 1. `1 <= grid.length <= 10`
> 2. `1 <= grid[0].length <= 10`
> 3. `grid[i][j]` ä»…ä¸º `0`ã€`1` æˆ– `2`

[é¢˜è§£](https://leetcode-cn.com/problems/rotting-oranges/solution/fu-lan-de-ju-zi-by-leetcode-solution/)

### æ€è·¯

- BFS

æ²¡çœ‹é¢˜è§£ï¼Œå®Œå…¨è‡ªå·±å†™çš„BFSã€‚å…‰ç†è§£é¢˜ç›®å°±èŠ±è´¹äº†å¾ˆé•¿æ—¶é—´ï¼Œä¸æ–­è°ƒè¯•ä¸­çŸ¥é“é¢˜ç›®æ„æ€ğŸ˜”ã€‚ä¸€çœ‹é¢˜è§£ç®€çŸ­åˆ°ä¸è¡ŒğŸ˜”ã€‚

è¯´æ˜ï¼š

- å½“è…çƒ‚æ©˜å­>1æ—¶ï¼Œè…çƒ‚çš„æ©˜å­æ˜¯å¯ä»¥åŒæ—¶æ„ŸæŸ“å‘¨å›´æ­£å¸¸æ©˜å­çš„ã€‚ï¼ˆäºæ˜¯ç»´æŠ¤äº†åŒé˜Ÿåˆ—ï¼‰
- æ­£å¸¸æ©˜å­å‘¨å›´éƒ½æ˜¯ç©ºåœ°ï¼Œè¯¥æ©˜å­æ€ä¹ˆå¼„éƒ½ä¸å¯èƒ½æ„ŸæŸ“ã€‚ï¼ˆäºæ˜¯å…ˆéå†ï¼Œæ‰¾åˆ°è¿™ç§ç‰¹ä¾‹ç›´æ¥è¿”å›ï¼Œå¦åˆ™å°†è…çƒ‚çš„ä½ç½®å…¨éƒ¨è®°å½•åˆ°å½“å‰é˜Ÿåˆ—ï¼‰
- å½“å‰é˜Ÿåˆ—è…è´¥æ©˜å­ä¾æ­¤å‡ºåˆ—ï¼Œå‘¨å›´æœ‰æ­£å¸¸æ©˜å­çš„ä¾æ­¤è¿›ä¸€ä¸ªæ–°é˜Ÿåˆ—ã€‚
- å¾…å½“å‰é˜Ÿåˆ—æ¶ˆè´¹å®Œï¼Œå°†ä¸‹ä¸€æ‰¹è¦æ¶ˆè´¹çš„é˜Ÿåˆ—ä¼ ç»™å½“å‰é˜Ÿåˆ—ä¾›æ¥ä¸‹æ¥æ¶ˆè´¹ï¼ŒåŒæ—¶å°†æ–°é˜Ÿåˆ—ç½®ç©ºã€‚
- ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå°†è®¿é—®è¿‡çš„è…çƒ‚æ©˜å­ç›´æ¥é‡èµ‹å€¼-2ã€‚

```python
from collections import deque

class Solution:
    directions = [(0,1), (1,0), (-1,0), (0,-1)]
    def orangesRotting(self, grid: List[List[int]]) -> int:
        m = len(grid)
        n = len(grid[0])
        # ç‰¹åˆ¤
        if n == 0:
            return 0
        if set(sum(grid, [])) == set([0]):
            return 0
        # æ‰¾åˆ°æ‰€æœ‰çš„è…çƒ‚ä½ç½®ï¼Œå¹¶è¿›cur_queé˜Ÿåˆ—
        res = 0
        has = 0
        direc_n = 0
        cur_que = deque()
        for i in range(m):
            for j in range(n):
                if grid[i][j] != 0:
                    for direction0 in self.directions:
                        new0_i = i + direction0[0]
                        new0_j = j + direction0[1]
                        if 0 <= new0_i < m and 0 <= new0_j < n:
                            direc_n += 1
                            if grid[new0_i][new0_j] == 0 :
                                has += 1
                    # å°†æ–°é²œæ©˜å­å››å‘¨éƒ½æ˜¯ç©ºåœ°çš„ç›´æ¥è¿”å›
                    if grid[i][j]==1 and has == direc_n:
                        return -1 
                    # å°†è…çƒ‚ä½ç½®è¿›é˜Ÿåˆ—
                    if grid[i][j] == 2:
                        cur_que.append((i,j))
                        # æ ‡è®°å·²è®¿é—®
                        grid[i][j] = -2
                    has = 0
                    direc_n = 0
        # éå†cur_queå°†ç»“æœä¾æ­¤æ”¾å…¥ä¸‹æ¬¡è¦æ‰§è¡Œçš„é˜Ÿåˆ—next_que
        # ç›®çš„æ˜¯å¤šä¸ªè…è´¥å¥å­å¯ä»¥åŒæ—¶æ„ŸæŸ“å‘¨å›´æ­£å¸¸æ©˜å­
        next_que = deque()
        while cur_que:
            cur_x, cur_y = cur_que.popleft()
            for direction in self.directions:
                new_i = cur_x + direction[0]
                new_j = cur_y + direction[1]
                if 0 <= new_i < m and 0 <= new_j < n and grid[new_i][new_j] == 1: 
                    # å½“å‰ä½ç½®å››ä¸ªæ–¹å‘ä¸Šæ­£å¸¸çš„æ©˜å­è¿›é˜Ÿåˆ—
                    next_que.append((new_i, new_j))
                    # æ ‡è®°å·²è®¿é—®
                    grid[new_i][new_j] = -2
            if not cur_que:
                # å°†å½“å‰é˜Ÿåˆ—cur_queæ¶ˆè´¹å®Œæ—¶ï¼Œå°†ä¸‹ä¸€æ‰¹è¦æ¶ˆè´¹çš„é˜Ÿåˆ—next_queä¼ ç»™å½“å‰é˜Ÿåˆ—
                cur_que = next_que
                # åŒæ—¶ï¼Œå°†ä¸‹ä¸€æ‰¹é˜Ÿåˆ—ç½®ç©º
                next_que = deque()
                # ç»“æœåˆ†é’Ÿæ•°+1
                res += 1
        return -1 if 1 in set(sum(grid, [])) else res-1 # æœ€ç»ˆgridå«1å°±è¿”å›-1ï¼Œå¦åˆ™è¿”å›ç»“æœ
```

